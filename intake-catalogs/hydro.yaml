plugins:
  source:
    - module: intake_xarray
    
sources:

  cgiar_pet:
    description: Global potential evapotranspiration from CGIAR-CSI
    metadata:
      url: 'https://cgiarcsi.community/data/global-aridity-and-pet-database'
      tags:
        - evapotranspiration
    driver: zarr
    args:
      urlpath: 'gcs://pangeo-data/cgiar_pet'
      storage_options:
        token: anon

  hydrosheds_dir:
    description: Drainage directions at 3-second resolution
    metadata:
      url: 'https://www.hydrosheds.org'
      tags:
        - drainage
    driver: rasterio
    cache:
      - argkey: urlpath
        regex: 'pangeo-data'
        type: file
    args:
      urlpath: 'gs://pangeo-data/hydrosheds/dir.vrt'
      chunks: {'y': 6000, 'x': 6000}

  hydrosheds_acc:
    description: Flow accumulation at 3-second resolution
    metadata:
      url: 'https://www.hydrosheds.org'
      tags:
        - flow
    driver: rasterio
    cache:
      - argkey: urlpath
        regex: 'pangeo-data'
        type: file
    args:
      urlpath: 'gs://pangeo-data/hydrosheds/acc.vrt'
      chunks: {'y': 6000, 'x': 6000}

  hydrosheds_dem:
    description: Digital Elevation Model (conditioned DEM) at 3-second resolution
    metadata:
      url: 'https://www.hydrosheds.org'
      tags:
        - DEM
    driver: rasterio
    cache:
      - argkey: urlpath
        regex: 'pangeo-data'
        type: file
    args:
      urlpath: 'gs://pangeo-data/hydrosheds/dem.vrt'
      chunks: {'y': 6000, 'x': 6000}

  soil_grids_single_level:
    description: Global gridded soil information in COG format
    parameters:
      variable:
        description: soil variable
        type: str
        default: TAXNWRB
    metadata:
      url: https://soilgrids.org/
      tags: Soil
    driver: rasterio
    args:
      urlpath: "gs://pangeo-data/soilgrids/{{ variable }}_250m.tif"
      chunks: {'y': 6000, 'x': 6000}  # TODO: align with COG chunks

  soil_grids_multi_level:
    description: Global gridded soil information in COG format
    parameters:
      variable:
        description: soil variable
        type: str
        default: AWCh1_M
      level:
        description: soil level
        type: int
        default: 1
    metadata:
      url: https://soilgrids.org/
      tags: Soil
    driver: rasterio
    args:
      urlpath: "gs://pangeo-data/soilgrids/{{ variable }}_sl{{ '%01d' % level }}_250m.tif"
      chunks: {'y': 6000, 'x': 6000}  # TODO: align with COG chunks

  camels:
    args:
      path: "{{CATALOG_DIR}}/hydro/camels.yaml"
    description: 'Pangeo Camels Dataset Catalog'
    driver: intake.catalog.local.YAMLFileCatalog
    metadata: {}
